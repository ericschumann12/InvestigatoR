<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>What the Package Does (Title Case) • InvestigatoR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="What the Package Does (Title Case)">
<meta property="og:description" content="More about what it does (maybe more than one line) Use four spaces when indenting paragraphs within the Description.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">InvestigatoR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/data_ml.R-vignette.html">Data Vignette for InvestigatoR</a>
    </li>
    <li>
      <a href="articles/Download_google_finance_data.html">Download google finance data</a>
    </li>
    <li>
      <a href="articles/Fetching%20and%20Preparing%20Financial%20Data.html">Fetching and Preparing Financial Data</a>
    </li>
    <li>
      <a href="articles/Stock_prices_from_Yahoo_Finance_with_comments.html">Stock_prices_from_Yahoo_Finance_with_comments</a>
    </li>
    <li>
      <a href="articles/Stock_prices_from_Yahoo_Finance.html">Stock_prices_from_Yahoo_Finance</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ericschumann12/InvestigatoR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div class="section level1">
<div class="page-header"><h1 id="investigator-">InvestigatoR <a href="https://github.com/ericschumann12/InvestigatoR" class="external-link"><img src="reference/figures/Investigator.png" align="right" height="139" style="float:right; height:200px;"></a>
<a class="anchor" aria-label="anchor" href="#investigator-"></a>
</h1></div>
<!-- badges: start -->

<!-- badges: end -->
</div>
<div class="section level1">
<h1 id="investogator-thats-what-she-said">“InvestogatoR” that’s what she said!<a class="anchor" aria-label="anchor" href="#investogator-thats-what-she-said"></a>
</h1>
<p>The <strong>goal of InvestigatoR</strong> is to provide a comprehensive toolkit for quantitative finance professionals and researchers to conduct advanced backtesting and portfolio analysis using machine learning models. It offers:</p>
<ul>
<li>a streamlined <em>workflow</em> for loading data</li>
<li>specifying <em>features</em>
</li>
<li>configuring <em>machine learning models</em>
</li>
<li>and analyzing the <em>performance of predictions and portfolio strategies</em>.</li>
</ul>
<p>This facilitates the evaluation of investment strategies, helping users to optimize returns and manage risks more effectively in their financial models.</p>
<p>It allows the user to retrieve:</p>
<ul>
<li>
<code>backtesting()</code> a list of results from applying a portfolio mapping function over each out-of-sample date, providing insights into the performance of trading strategies based on specified features and historical data.</li>
<li>
<code><a href="reference/backtesting_returns.html">backtesting_returns()</a></code> a tibble with the stock_id, date and the predicted returns based on Machinelearning that later be used for a trading strategy</li>
<li>
<code><a href="reference/backtesting_portfolios.html">backtesting_portfolios()</a></code> a portfolio object suitable for further processing with summary or plot for backtesting portfolios given return predictions</li>
<li>
<code>helpers()</code> a tibble with columns training_start, training_end, prediction_start, prediction_end, and prediction_phase</li>
<li>
<code>mappers()</code> a tibble that contains the stock ID, date, and predicted returns. This function acts as a helper to map over indices and apply a specified machine learning model to predict returns, segmenting the data into training and testing sets based on given indices.</li>
<li>
<code>neural_network_predictions()</code> a list containing the trained model, the training history, and the predictions. This function normalizes the feature data, constructs and compiles a neural network model, fits the model to the training data, evaluates its performance on test data, and finally predicts investment decisions (e.g., to invest or not).</li>
<li>
<code>penreg_lasso()</code> a pair of model fits (“fit_lasso” and “fit_ridge”), which are the outcomes of penalized regression models applied to the specified predictor (x_penalized) and response (y_penalized) variables.</li>
<li>
<code>portfolio_objects()</code> a returnPrediction S3 object that organizes stock IDs, dates, actual returns, and placeholders for predictions and errors, facilitating structured tracking and analysis of return predictions.</li>
<li>
<code>random_foreest_predictor()</code> predictions from a random forest model trained on specified features and data, using user-defined settings for the number of trees, node size, sample size, and variables per split.</li>
<li>
<code>returnPredictors()</code> tibble with stock_id, date and pred_return matching the test_data based on the chose of the two primary modeling techniques/functions (“ols_pred()” using an ordinary least squares regression with a choice between a fast implementation with RcppArmadillo or a standard implementation with base R’s lm function or “xgb_pred”()” using an XGBoost model trained with either user-specified settings or default parameters (like learning rate, tree depth, and number of rounds to optimize prediction accuracy)).</li>
<li>
<code>weight_functions()</code>a tibble with stock_id, date, and weights based on predictions with given constraints like “quantile_weights()” where weights are assigned based on quantiles of predictions, allowing for configurations such as allowing short sales, specifying maximum and minimum weights for individual stocks, and adjusting the total weight in long and short positions or “ensemble_weights()”, where weights are calculated using different methods such as a simple average of predictions, a weighted average based on the inverse of average errors, or using the covariance of prediction errors to determine the weighting scheme.</li>
<li>
<code>InvestigatoR-package()</code> a package that provides a comprehensive toolkit for quantitative finance professionals and researchers to conduct advanced backtesting and portfolio analysis using machine learning models.</li>
</ul>
</div>
<div class="section level1">
<h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1>
<p>You can install the development version of InvestigatoR from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ericschumann12/InvestigatoR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="package-contribution">Package Contribution<a class="anchor" aria-label="anchor" href="#package-contribution"></a>
</h1>
<p>tbd</p>
</div>
<div class="section level1">
<h1 id="package-usage">Package Usage<a class="anchor" aria-label="anchor" href="#package-usage"></a>
</h1>
<p>This is a basic example which shows you how to solve a common problem:</p>
<p>First we load the <code>InvestigatoR</code>-package and the <code>tidyverse</code>-package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ericschumann12/InvestigatoR" class="external-link">InvestigatoR</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'quantmod':</span></span>
<span><span class="co">#&gt;   method            from</span></span>
<span><span class="co">#&gt;   as.zoo.data.frame zoo</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">#&gt; ✔ dplyr     1.1.4     ✔ readr     2.1.5</span></span>
<span><span class="co">#&gt; ✔ forcats   1.0.0     ✔ stringr   1.5.1</span></span>
<span><span class="co">#&gt; ✔ ggplot2   3.5.1     ✔ tibble    3.2.1</span></span>
<span><span class="co">#&gt; ✔ lubridate 1.9.3     ✔ tidyr     1.3.1</span></span>
<span><span class="co">#&gt; ✔ purrr     1.0.2</span></span>
<span><span class="co">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span></span>
<span><span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></span>
<span><span class="co">#&gt; ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</span></span>
<span><span class="co">## basic example code</span></span></code></pre></div>
<p>Next we load the complimentary dataset that comes with the package:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"data_ml"</span><span class="op">)</span></span>
<span><span class="va">data_ml</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1998-11-30"</span></span>
<span><span class="va">data_ml</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-03-31"</span></span></code></pre></div>
<p>For a description, see…. The original datset was provided by Guillaume Coqueret and Tony Guida with their book <a href="https://mlfactor.com" class="external-link">Machine Learning for Factor Investing</a>.</p>
<p>Next we specify the set of features that should be used for return prediction, specify some options for backtesting, such as whether the return prediction should be done with a rolling window (TRUE), the window size (“5 years”), the step size(“3 months”, this means, how often do we reestimate the ML model), the offset (“1 year” to avoid any form of data spillage).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">return_label</span> <span class="op">&lt;-</span> <span class="st">"R1M_Usd"</span></span>
<span><span class="va">features</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Div_Yld"</span>, <span class="st">"Eps"</span>, <span class="st">"Mkt_Cap_12M_Usd"</span>, <span class="st">"Mom_11M_Usd"</span>, <span class="st">"Ocf"</span>, <span class="st">"Pb"</span>, <span class="st">"Vol1Y_Usd"</span><span class="op">)</span></span>
<span><span class="va">rolling</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span>; <span class="va">window_size</span><span class="op">=</span> <span class="st">"5 years"</span>; <span class="va">step_size</span> <span class="op">=</span> <span class="st">"1 months"</span>; <span class="va">offset</span> <span class="op">=</span> <span class="st">"1 month"</span>; <span class="va">in_sample</span> <span class="op">=</span> <span class="cn">TRUE</span></span></code></pre></div>
<p>Next we specify the machine learning configuration. We can specify multiple configurations, for example, one for a linear regression model and one for a gradient boosting model. The configuration for the linear regression model is empty, as we use the default configuration. The configuration for the gradient boosting model specifies the number of rounds, the maximum depth of the trees, the learning rate, and the objective function. Other functions still need to be implemented.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">ml_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ols_pred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pred_func<span class="op">=</span><span class="st">"ols_pred"</span>, config<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                   xgb_pred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pred_func<span class="op">=</span><span class="st">"xgb_pred"</span>, </span>
<span>                                   config1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nrounds<span class="op">=</span><span class="fl">10</span>, max_depth<span class="op">=</span><span class="fl">3</span>, eta<span class="op">=</span><span class="fl">0.3</span>, objective<span class="op">=</span><span class="st">"reg:squarederror"</span><span class="op">)</span>,</span>
<span>                                   config2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nrounds<span class="op">=</span><span class="fl">10</span>, max_depth<span class="op">=</span><span class="fl">3</span>, eta<span class="op">=</span><span class="fl">0.1</span>, objective<span class="op">=</span><span class="st">"reg:squarederror"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Finally, we call the backtesting function. The function returns a data frame with the backtesting results. The data frame contains the following columns: date, return_label, features, rolling, window_size, step_size, offset, in_sample, ml_config, model, predicted returns, actual realized returns, and errors for all predictions. The model column contains the name of the model that was used for the prediction. The prediction column contains the predicted returns. The actual column contains the actual returns. The error column contains the difference between the predicted and the actual returns.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">rp</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/backtesting_returns.html">backtesting_returns</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">data_ml</span>, return_prediction_object<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>   <span class="va">return_label</span>, <span class="va">features</span>, rolling<span class="op">=</span><span class="cn">FALSE</span>, <span class="va">window_size</span>, <span class="va">step_size</span>, <span class="va">offset</span>, <span class="va">in_sample</span>, <span class="va">ml_config</span>, append<span class="op">=</span><span class="cn">FALSE</span>, num_cores<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co">#&gt; Currently processing model 1 of 2 </span></span>
<span><span class="co">#&gt; Specifically processing config 1 of 1 </span></span>
<span><span class="co">#&gt; Currently processing model 2 of 2 </span></span>
<span><span class="co">#&gt; Specifically processing config 1 of 2</span></span>
<span><span class="co">#&gt; Warning: UNRELIABLE VALUE: Future ('&lt;none&gt;') unexpectedly generated random</span></span>
<span><span class="co">#&gt; numbers without specifying argument 'seed'. There is a risk that those random</span></span>
<span><span class="co">#&gt; numbers are not statistically sound and the overall results might be invalid.</span></span>
<span><span class="co">#&gt; To fix this, specify 'seed=TRUE'. This ensures that proper, parallel-safe</span></span>
<span><span class="co">#&gt; random numbers are produced via the L'Ecuyer-CMRG method. To disable this</span></span>
<span><span class="co">#&gt; check, use 'seed=NULL', or set option 'future.rng.onMisuse' to "ignore".</span></span>
<span><span class="co">#&gt; Specifically processing config 2 of 2</span></span>
<span><span class="co">#&gt; Warning: UNRELIABLE VALUE: Future ('&lt;none&gt;') unexpectedly generated random</span></span>
<span><span class="co">#&gt; numbers without specifying argument 'seed'. There is a risk that those random</span></span>
<span><span class="co">#&gt; numbers are not statistically sound and the overall results might be invalid.</span></span>
<span><span class="co">#&gt; To fix this, specify 'seed=TRUE'. This ensures that proper, parallel-safe</span></span>
<span><span class="co">#&gt; random numbers are produced via the L'Ecuyer-CMRG method. To disable this</span></span>
<span><span class="co">#&gt; check, use 'seed=NULL', or set option 'future.rng.onMisuse' to "ignore".</span></span></code></pre></div>
<p>Next we take this predictions and analyse thbeir statistical properties</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rp</span><span class="op">$</span><span class="va">predictions</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   stock_id date        ols_1  xgb_1 xgb_2</span></span>
<span><span class="co">#&gt;      &lt;int&gt; &lt;date&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1       13 2006-12-31 0.0305 0.0402 0.191</span></span>
<span><span class="co">#&gt; 2       13 2007-01-31 0.0308 0.0397 0.191</span></span>
<span><span class="co">#&gt; 3       13 2007-02-28 0.0300 0.0439 0.193</span></span>
<span><span class="co">#&gt; 4       17 2015-03-31 0.0336 0.110  0.223</span></span>
<span><span class="co">#&gt; 5       17 2015-04-30 0.0343 0.0734 0.222</span></span>
<span><span class="co">#&gt; 6       17 2015-05-31 0.0344 0.0987 0.214</span></span>
<span><span class="va">rp_stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">rp</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rp_stats</span><span class="op">)</span></span>
<span><span class="co">#&gt;       MSE        RMSE      MAE        Hit_Ratio</span></span>
<span><span class="co">#&gt; ols_1 0.03158888 0.1777326 0.08071823 0.5352989</span></span>
<span><span class="co">#&gt; xgb_1 0.03142746 0.1772779 0.08193929 0.5529501</span></span>
<span><span class="co">#&gt; xgb_2 0.06060931 0.2461896 0.1848615  0.5525796</span></span></code></pre></div>
<p>Next, we map those predictions into various portfolios (quantiles) and analyse their performance. We specify various weight restrictions, such as the minimum and maximum weight, the minimum and maximum cutoff quantile, and the b parameter that adjusts the amount of investment per leg (b=1 means, we go 100% long and short). We also specify the predictions that should be used for the portfolio formation (e.g., ols_1, xgb_1, xgb_2).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pf_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>predictions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ols_1"</span>,<span class="st">"xgb_1"</span>,<span class="st">"xgb_2"</span><span class="op">)</span>,</span>
<span>                  quantile_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pred_func<span class="op">=</span><span class="st">"quantile_weights"</span>,</span>
<span>                    config1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>long <span class="op">=</span> <span class="fl">0.20</span>, short <span class="op">=</span> <span class="fl">0.20</span><span class="op">)</span>,allow_short_sale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                      min_weight <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,  max_weight <span class="op">=</span> <span class="fl">1</span>, b <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                    config2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>long <span class="op">=</span> <span class="fl">0.10</span>, short <span class="op">=</span> <span class="fl">0.10</span><span class="op">)</span>,allow_short_sale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                      min_weight <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,  max_weight <span class="op">=</span> <span class="fl">1</span>, b <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Finally we run the portfolio formation process.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/backtesting_portfolios.html">backtesting_portfolios</a></span><span class="op">(</span>return_prediction_object <span class="op">=</span> <span class="va">rp</span>, pf_config <span class="op">=</span> <span class="va">pf_config</span><span class="op">)</span></span>
<span><span class="co">#&gt; Currently processing weight model 1 of 1 </span></span>
<span><span class="co">#&gt; Specifically processing config 1 of 2 </span></span>
<span><span class="co">#&gt; Specifically processing config 2 of 2</span></span></code></pre></div>
<p>Let us check the content of pf, and calculate some summary statistics</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pf</span><span class="op">$</span><span class="va">weights</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span><span class="co">#&gt;   stock_id date       ols_1_quantile_weights_1 xgb_1_quantile_weights_1</span></span>
<span><span class="co">#&gt;      &lt;int&gt; &lt;date&gt;                        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1       13 2006-12-31                  0.00418                  0.00418</span></span>
<span><span class="co">#&gt; 2       13 2007-01-31                  0.00418                  0.00418</span></span>
<span><span class="co">#&gt; 3       13 2007-02-28                  0.00418                  0.00418</span></span>
<span><span class="co">#&gt; 4       17 2015-03-31                  0.00418                  0.00418</span></span>
<span><span class="co">#&gt; 5       17 2015-04-30                  0.00418                  0.00418</span></span>
<span><span class="co">#&gt; 6       17 2015-05-31                  0.00418                  0.00418</span></span>
<span><span class="co">#&gt; # ℹ 4 more variables: xgb_2_quantile_weights_1 &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   ols_1_quantile_weights_2 &lt;dbl&gt;, xgb_1_quantile_weights_2 &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   xgb_2_quantile_weights_2 &lt;dbl&gt;</span></span>
<span><span class="va">pf</span><span class="op">$</span><span class="va">portfolio_returns</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 7</span></span>
<span><span class="co">#&gt;   date       ols_1_quantile_weights_1 xgb_1_quantile_weights_1</span></span>
<span><span class="co">#&gt;   &lt;date&gt;                        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 2006-12-31                0.0184                     0.0171 </span></span>
<span><span class="co">#&gt; 2 2007-01-31                0.0189                     0.0177 </span></span>
<span><span class="co">#&gt; 3 2007-02-28                0.0160                     0.0166 </span></span>
<span><span class="co">#&gt; 4 2015-03-31               -0.0000879                 -0.00412</span></span>
<span><span class="co">#&gt; 5 2015-04-30                0.00680                    0.00849</span></span>
<span><span class="co">#&gt; 6 2015-05-31               -0.00671                   -0.0102 </span></span>
<span><span class="co">#&gt; # ℹ 4 more variables: xgb_2_quantile_weights_1 &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   ols_1_quantile_weights_2 &lt;dbl&gt;, xgb_1_quantile_weights_2 &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   xgb_2_quantile_weights_2 &lt;dbl&gt;</span></span>
<span><span class="va">pf_stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pf</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pf_stats</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span><span class="co">#&gt;   portfolio                  mean     sd    SR   VaR_5 turnover</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 ols_1_quantile_weights_1 0.0280 0.0773 0.362 -0.0905     93.7</span></span>
<span><span class="co">#&gt; 2 ols_1_quantile_weights_2 0.0352 0.0904 0.389 -0.0995    120. </span></span>
<span><span class="co">#&gt; 3 xgb_1_quantile_weights_1 0.0287 0.0753 0.382 -0.0915    110. </span></span>
<span><span class="co">#&gt; 4 xgb_1_quantile_weights_2 0.0385 0.0937 0.411 -0.105     135. </span></span>
<span><span class="co">#&gt; 5 xgb_2_quantile_weights_1 0.0282 0.0733 0.385 -0.0855     90.1</span></span>
<span><span class="co">#&gt; 6 xgb_2_quantile_weights_2 0.0383 0.0904 0.424 -0.0916    118.</span></span></code></pre></div>
<p>Alternatively, we can also calculate statistics from the <code>PerformanceAnalytics</code> package.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/tidyquant" class="external-link">tidyquant</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: PerformanceAnalytics</span></span>
<span><span class="co">#&gt; Loading required package: xts</span></span>
<span><span class="co">#&gt; Loading required package: zoo</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'zoo'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     as.Date, as.Date.numeric</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'xts'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:dplyr':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     first, last</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'PerformanceAnalytics'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:graphics':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     legend</span></span>
<span><span class="co">#&gt; Loading required package: quantmod</span></span>
<span><span class="co">#&gt; Loading required package: TTR</span></span>
<span><span class="co"># tidyquant::tq_performance_fun_options()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pf</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span><span class="co">#&gt;   portfolio                  mean     sd    SR   VaR_5 turnover</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 ols_1_quantile_weights_1 0.0280 0.0773 0.362 -0.0905     93.7</span></span>
<span><span class="co">#&gt; 2 ols_1_quantile_weights_2 0.0352 0.0904 0.389 -0.0995    120. </span></span>
<span><span class="co">#&gt; 3 xgb_1_quantile_weights_1 0.0287 0.0753 0.382 -0.0915    110. </span></span>
<span><span class="co">#&gt; 4 xgb_1_quantile_weights_2 0.0385 0.0937 0.411 -0.105     135. </span></span>
<span><span class="co">#&gt; 5 xgb_2_quantile_weights_1 0.0282 0.0733 0.385 -0.0855     90.1</span></span>
<span><span class="co">#&gt; 6 xgb_2_quantile_weights_2 0.0383 0.0904 0.424 -0.0916    118.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pf</span>, type <span class="op">=</span> <span class="st">"table.AnnualizedReturns"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Non-numeric columns being dropped: date</span></span>
<span><span class="co">#&gt; Using column `date` for date_var.</span></span>
<span><span class="co">#&gt;                           ols_1_quantile_weights_1 xgb_1_quantile_weights_1</span></span>
<span><span class="co">#&gt; Annualized Return                           0.3470                   0.3611</span></span>
<span><span class="co">#&gt; Annualized Std Dev                          0.2678                   0.2607</span></span>
<span><span class="co">#&gt; Annualized Sharpe (Rf=0%)                   1.2959                   1.3849</span></span>
<span><span class="co">#&gt;                           xgb_2_quantile_weights_1 ols_1_quantile_weights_2</span></span>
<span><span class="co">#&gt; Annualized Return                           0.3544                   0.4486</span></span>
<span><span class="co">#&gt; Annualized Std Dev                          0.2538                   0.3132</span></span>
<span><span class="co">#&gt; Annualized Sharpe (Rf=0%)                   1.3963                   1.4323</span></span>
<span><span class="co">#&gt;                           xgb_1_quantile_weights_2 xgb_2_quantile_weights_2</span></span>
<span><span class="co">#&gt; Annualized Return                           0.5015                   0.5024</span></span>
<span><span class="co">#&gt; Annualized Std Dev                          0.3247                   0.3133</span></span>
<span><span class="co">#&gt; Annualized Sharpe (Rf=0%)                   1.5447                   1.6036</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pf</span>, type <span class="op">=</span> <span class="st">"table.Distributions"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Non-numeric columns being dropped: date</span></span>
<span><span class="co">#&gt; Using column `date` for date_var.</span></span>
<span><span class="co">#&gt;                        ols_1_quantile_weights_1 xgb_1_quantile_weights_1</span></span>
<span><span class="co">#&gt; monthly  Std Dev                         0.0773                   0.0753</span></span>
<span><span class="co">#&gt; Skewness                                 0.7575                   0.5217</span></span>
<span><span class="co">#&gt; Kurtosis                                 8.7266                   6.4319</span></span>
<span><span class="co">#&gt; Excess kurtosis                          5.7266                   3.4319</span></span>
<span><span class="co">#&gt; Sample skewness                          0.7669                   0.5281</span></span>
<span><span class="co">#&gt; Sample excess kurtosis                   5.8701                   3.5278</span></span>
<span><span class="co">#&gt;                        xgb_2_quantile_weights_1 ols_1_quantile_weights_2</span></span>
<span><span class="co">#&gt; monthly  Std Dev                         0.0733                   0.0904</span></span>
<span><span class="co">#&gt; Skewness                                 0.4446                   1.0366</span></span>
<span><span class="co">#&gt; Kurtosis                                 5.7883                   9.9508</span></span>
<span><span class="co">#&gt; Excess kurtosis                          2.7883                   6.9508</span></span>
<span><span class="co">#&gt; Sample skewness                          0.4501                   1.0495</span></span>
<span><span class="co">#&gt; Sample excess kurtosis                   2.8709                   7.1197</span></span>
<span><span class="co">#&gt;                        xgb_1_quantile_weights_2 xgb_2_quantile_weights_2</span></span>
<span><span class="co">#&gt; monthly  Std Dev                         0.0937                   0.0904</span></span>
<span><span class="co">#&gt; Skewness                                 0.8782                   0.8076</span></span>
<span><span class="co">#&gt; Kurtosis                                 6.5942                   6.4552</span></span>
<span><span class="co">#&gt; Excess kurtosis                          3.5942                   3.4552</span></span>
<span><span class="co">#&gt; Sample skewness                          0.8890                   0.8175</span></span>
<span><span class="co">#&gt; Sample excess kurtosis                   3.6935                   3.5517</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pf</span>, type <span class="op">=</span> <span class="st">"table.DownsideRisk"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Non-numeric columns being dropped: date</span></span>
<span><span class="co">#&gt; Using column `date` for date_var.</span></span>
<span><span class="co">#&gt;                              ols_1_quantile_weights_1 xgb_1_quantile_weights_1</span></span>
<span><span class="co">#&gt; Semi Deviation                                 0.0515                   0.0506</span></span>
<span><span class="co">#&gt; Gain Deviation                                 0.0605                   0.0578</span></span>
<span><span class="co">#&gt; Loss Deviation                                 0.0479                   0.0451</span></span>
<span><span class="co">#&gt; Downside Deviation (MAR=10%)                   0.0420                   0.0406</span></span>
<span><span class="co">#&gt; Downside Deviation (Rf=0%)                     0.0385                   0.0370</span></span>
<span><span class="co">#&gt; Downside Deviation (0%)                        0.0385                   0.0370</span></span>
<span><span class="co">#&gt; Maximum Drawdown                               0.5227                   0.5017</span></span>
<span><span class="co">#&gt; Historical VaR (95%)                          -0.0905                  -0.0915</span></span>
<span><span class="co">#&gt; Historical ES (95%)                           -0.1353                  -0.1291</span></span>
<span><span class="co">#&gt; Modified VaR (95%)                            -0.0725                  -0.0781</span></span>
<span><span class="co">#&gt; Modified ES (95%)                             -0.0725                  -0.0989</span></span>
<span><span class="co">#&gt;                              xgb_2_quantile_weights_1 ols_1_quantile_weights_2</span></span>
<span><span class="co">#&gt; Semi Deviation                                 0.0495                   0.0583</span></span>
<span><span class="co">#&gt; Gain Deviation                                 0.0559                   0.0737</span></span>
<span><span class="co">#&gt; Loss Deviation                                 0.0441                   0.0540</span></span>
<span><span class="co">#&gt; Downside Deviation (MAR=10%)                   0.0397                   0.0455</span></span>
<span><span class="co">#&gt; Downside Deviation (Rf=0%)                     0.0361                   0.0421</span></span>
<span><span class="co">#&gt; Downside Deviation (0%)                        0.0361                   0.0421</span></span>
<span><span class="co">#&gt; Maximum Drawdown                               0.4732                   0.5624</span></span>
<span><span class="co">#&gt; Historical VaR (95%)                          -0.0855                  -0.0995</span></span>
<span><span class="co">#&gt; Historical ES (95%)                           -0.1262                  -0.1486</span></span>
<span><span class="co">#&gt; Modified VaR (95%)                            -0.0785                  -0.0722</span></span>
<span><span class="co">#&gt; Modified ES (95%)                             -0.1049                  -0.0722</span></span>
<span><span class="co">#&gt;                              xgb_1_quantile_weights_2 xgb_2_quantile_weights_2</span></span>
<span><span class="co">#&gt; Semi Deviation                                 0.0597                   0.0583</span></span>
<span><span class="co">#&gt; Gain Deviation                                 0.0775                   0.0736</span></span>
<span><span class="co">#&gt; Loss Deviation                                 0.0519                   0.0502</span></span>
<span><span class="co">#&gt; Downside Deviation (MAR=10%)                   0.0448                   0.0437</span></span>
<span><span class="co">#&gt; Downside Deviation (Rf=0%)                     0.0414                   0.0402</span></span>
<span><span class="co">#&gt; Downside Deviation (0%)                        0.0414                   0.0402</span></span>
<span><span class="co">#&gt; Maximum Drawdown                               0.5167                   0.4836</span></span>
<span><span class="co">#&gt; Historical VaR (95%)                          -0.1053                  -0.0916</span></span>
<span><span class="co">#&gt; Historical ES (95%)                           -0.1463                  -0.1427</span></span>
<span><span class="co">#&gt; Modified VaR (95%)                            -0.0838                  -0.0820</span></span>
<span><span class="co">#&gt; Modified ES (95%)                             -0.0937                  -0.0936</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pf</span>, type <span class="op">=</span> <span class="st">"table.DrawdownsRatio"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Non-numeric columns being dropped: date</span></span>
<span><span class="co">#&gt; Using column `date` for date_var.</span></span>
<span><span class="co">#&gt;                ols_1_quantile_weights_1 xgb_1_quantile_weights_1</span></span>
<span><span class="co">#&gt; Sterling ratio                   0.5572                   0.6002</span></span>
<span><span class="co">#&gt; Calmar ratio                     0.6638                   0.7198</span></span>
<span><span class="co">#&gt; Burke ratio                      0.4231                   0.4543</span></span>
<span><span class="co">#&gt; Pain index                       0.0374                   0.0357</span></span>
<span><span class="co">#&gt; Ulcer index                      0.0861                   0.0830</span></span>
<span><span class="co">#&gt; Pain ratio                       9.2826                  10.1193</span></span>
<span><span class="co">#&gt; Martin ratio                     4.0290                   4.3518</span></span>
<span><span class="co">#&gt;                xgb_2_quantile_weights_1 ols_1_quantile_weights_2</span></span>
<span><span class="co">#&gt; Sterling ratio                   0.6183                   0.6772</span></span>
<span><span class="co">#&gt; Calmar ratio                     0.7490                   0.7976</span></span>
<span><span class="co">#&gt; Burke ratio                      0.4630                   0.5027</span></span>
<span><span class="co">#&gt; Pain index                       0.0326                   0.0365</span></span>
<span><span class="co">#&gt; Ulcer index                      0.0753                   0.0901</span></span>
<span><span class="co">#&gt; Pain ratio                      10.8872                  12.2911</span></span>
<span><span class="co">#&gt; Martin ratio                     4.7070                   4.9791</span></span>
<span><span class="co">#&gt;                xgb_1_quantile_weights_2 xgb_2_quantile_weights_2</span></span>
<span><span class="co">#&gt; Sterling ratio                   0.8132                   0.8609</span></span>
<span><span class="co">#&gt; Calmar ratio                     0.9706                   1.0390</span></span>
<span><span class="co">#&gt; Burke ratio                      0.5724                   0.5918</span></span>
<span><span class="co">#&gt; Pain index                       0.0373                   0.0350</span></span>
<span><span class="co">#&gt; Ulcer index                      0.0873                   0.0809</span></span>
<span><span class="co">#&gt; Pain ratio                      13.4421                  14.3659</span></span>
<span><span class="co">#&gt; Martin ratio                     5.7468                   6.2130</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pf</span>, type <span class="op">=</span> <span class="st">"cov"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Non-numeric columns being dropped: date</span></span>
<span><span class="co">#&gt; Using column `date` for date_var.</span></span>
<span><span class="co">#&gt;                          ols_1_quantile_weights_1 xgb_1_quantile_weights_1</span></span>
<span><span class="co">#&gt; ols_1_quantile_weights_1              0.005974579              0.005773093</span></span>
<span><span class="co">#&gt; xgb_1_quantile_weights_1              0.005773093              0.005664717</span></span>
<span><span class="co">#&gt; xgb_2_quantile_weights_1              0.005595153              0.005481785</span></span>
<span><span class="co">#&gt; ols_1_quantile_weights_2              0.006771307              0.006538059</span></span>
<span><span class="co">#&gt; xgb_1_quantile_weights_2              0.006981303              0.006848935</span></span>
<span><span class="co">#&gt; xgb_2_quantile_weights_2              0.006657444              0.006564361</span></span>
<span><span class="co">#&gt;                          xgb_2_quantile_weights_1 ols_1_quantile_weights_2</span></span>
<span><span class="co">#&gt; ols_1_quantile_weights_1              0.005595153              0.006771307</span></span>
<span><span class="co">#&gt; xgb_1_quantile_weights_1              0.005481785              0.006538059</span></span>
<span><span class="co">#&gt; xgb_2_quantile_weights_1              0.005368910              0.006328466</span></span>
<span><span class="co">#&gt; ols_1_quantile_weights_2              0.006328466              0.008175970</span></span>
<span><span class="co">#&gt; xgb_1_quantile_weights_2              0.006637890              0.008148268</span></span>
<span><span class="co">#&gt; xgb_2_quantile_weights_2              0.006366076              0.007930356</span></span>
<span><span class="co">#&gt;                          xgb_1_quantile_weights_2 xgb_2_quantile_weights_2</span></span>
<span><span class="co">#&gt; ols_1_quantile_weights_1              0.006981303              0.006657444</span></span>
<span><span class="co">#&gt; xgb_1_quantile_weights_1              0.006848935              0.006564361</span></span>
<span><span class="co">#&gt; xgb_2_quantile_weights_1              0.006637890              0.006366076</span></span>
<span><span class="co">#&gt; ols_1_quantile_weights_2              0.008148268              0.007930356</span></span>
<span><span class="co">#&gt; xgb_1_quantile_weights_2              0.008785115              0.008292291</span></span>
<span><span class="co">#&gt; xgb_2_quantile_weights_2              0.008292291              0.008180366</span></span></code></pre></div>
<p>Now we plot the corresponding cumulative returns of the portfolios</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pf</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-plot_pf-1.png" width="100%"></p>
<p>Alternatively, the plotting function is designed in a way, that it takes plotting function from the <code>tidyquant</code> package as inputs.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/tidyquant" class="external-link">tidyquant</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="st">"package:PerformanceAnalytics"</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"chart"</span>,<span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="st">"package:PerformanceAnalytics"</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1] "chart.ACF"                       "chart.ACFplus"                  </span></span>
<span><span class="co">#&gt;  [3] "chart.Bar"                       "chart.BarVaR"                   </span></span>
<span><span class="co">#&gt;  [5] "chart.Boxplot"                   "chart.CaptureRatios"            </span></span>
<span><span class="co">#&gt;  [7] "chart.Correlation"               "chart.CumReturns"               </span></span>
<span><span class="co">#&gt;  [9] "chart.Drawdown"                  "chart.ECDF"                     </span></span>
<span><span class="co">#&gt; [11] "chart.Events"                    "chart.Histogram"                </span></span>
<span><span class="co">#&gt; [13] "chart.QQPlot"                    "chart.Regression"               </span></span>
<span><span class="co">#&gt; [15] "chart.RelativePerformance"       "chart.RiskReturnScatter"        </span></span>
<span><span class="co">#&gt; [17] "chart.RollingCorrelation"        "chart.RollingMean"              </span></span>
<span><span class="co">#&gt; [19] "chart.RollingPerformance"        "chart.RollingQuantileRegression"</span></span>
<span><span class="co">#&gt; [21] "chart.RollingRegression"         "chart.Scatter"                  </span></span>
<span><span class="co">#&gt; [23] "chart.SnailTrail"                "chart.StackedBar"               </span></span>
<span><span class="co">#&gt; [25] "chart.TimeSeries"                "chart.VaRSensitivity"           </span></span>
<span><span class="co">#&gt; [27] "charts.Bar"                      "charts.BarVaR"                  </span></span>
<span><span class="co">#&gt; [29] "charts.PerformanceSummary"       "charts.RollingPerformance"      </span></span>
<span><span class="co">#&gt; [31] "charts.RollingRegression"        "charts.TimeSeries"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pf</span>, type <span class="op">=</span> <span class="st">"chart.CumReturns"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using column `date` for date_var.</span></span></code></pre></div>
<p><img src="reference/figures/README-plot_pf_tq-1.png" width="100%"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pf</span>, type <span class="op">=</span> <span class="st">"charts.PerformanceSummary"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using column `date` for date_var.</span></span></code></pre></div>
<p><img src="reference/figures/README-plot_pf_tq-2.png" width="100%"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pf</span>, type <span class="op">=</span> <span class="st">"chart.Boxplot"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using column `date` for date_var.</span></span></code></pre></div>
<p><img src="reference/figures/README-plot_pf_tq-3.png" width="100%"></p>
<div class="section level3">
<h3 id="authorlicense">Author/License<a class="anchor" aria-label="anchor" href="#authorlicense"></a>
</h3>
<ul>
<li>
<strong>Investigator Team and Ass.-Prof. Dr. Sebastian Stöckl</strong> - Package Creator, Modifier &amp; Maintainer - <a href="https://github.com/sstoeckl" class="external-link">sstoeckl on github</a>
</li>
</ul>
<p>This project is licensed under the MIT License - see the &lt;license.md&gt; file for details&lt;/license.md&gt;</p>
</div>
<div class="section level3">
<h3 id="acknowledgments">Acknowledgments<a class="anchor" aria-label="anchor" href="#acknowledgments"></a>
</h3>
<p>tbd</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ericschumann12/InvestigatoR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ericschumann12/InvestigatoR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing InvestigatoR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Eric Schumann <br><small class="roles"> Author, maintainer </small>  </li>
<li>Andreas Pischetsrieder <br><small class="roles"> Author, maintainer </small>  </li>
<li>Christian Mahrun <br><small class="roles"> Author </small>  </li>
<li>Noah Veltri <br><small class="roles"> Author </small>  </li>
<li>Nicolas Baumann <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Eric Schumann, Andreas Pischetsrieder, Christian Mahrun, Noah Veltri, Nicolas Baumann.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
